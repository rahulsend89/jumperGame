!function(){var t=document.getElementById("canvas");t.width=320,t.height=420;var e=!1,i=0,o=30,h=60,n=.9,c=!1,r=0,d=0,l=0,a=!1,s=!1,f=2,u=t.getContext("2d"),g=[],w=[],y={x:20,y:20,scale:1,anchorpoint:0,width:10,height:10,speed:.5,color:"#c00",intersects:function(t){return!(t.x>D(this).x+D(this).width||t.x+t.width<D(this).x||t.y>D(this).y+D(this).height||t.y+t.height<D(this).y)},groupSprite:[{x:2,y:2,width:2,height:2,color:"#fcf"},{x:6,y:2,width:2,height:2,color:"#fcf"},{x:3,y:6,width:4,height:2,color:"#fcf"}]},p={x:0,y:0,width:t.width,height:t.height,color:"#ccc"},x={x:0,y:t.height-o,width:t.width,height:o,color:"#222"},v={},m=Date.now(),S=function(){a&&(a=!1,f=-6,c=!0),c&&(n=1.1,-8>f?(n=0,f=-8,c=!1):f*=n)},k=function(){e=!0,w=[],g=[],clearInterval(d),clearTimeout(l)},E=function(e){38 in v&&S(),f+=y.speed,f>h/5&&(f=h/5),D(y).y+f>t.height-D(y).height-o?(a=!0,y.y=t.height-D(y).height+(y.y-D(y).y)-o):a||(y.y+=f);for(var n=w.length-1;n>=0;n--){var c=w[n];c.x-=c.speed*e,y.intersects(c)&&k(),c.x<0&&(i++,O(c,g),O(c,w))}},T=function(){var i=t.width,n=Math.random()*h+o,c={x:i,y:t.height-o-n,width:10,height:n,speed:200,color:"#c00"};w.push(c),g.push(c),e||(l=setTimeout(T,1e3*Math.random()+200))},C=function(t){u.fillStyle=t.color,u.fillRect(D(t).x,D(t).y,D(t).width,D(t).height)},L=function(t,e){u.fillStyle=e.color;var i=1;void 0!==e.scale?i=e.scale:e.scale=1,void 0!==t.scale?i=t.scale*e.scale:t.scale=1,u.fillRect(D(t).x+e.x*i,D(t).y+e.y*i,e.width*i,e.height*i)},D=function(t){var e=0,i=1;void 0!==t.scale&&(i=t.scale),void 0!==t.anchorpoint&&(e=t.anchorpoint);var o=t.width*i,h=t.height*i;return{x:t.x+o/100*e*100,y:t.y-h/100*e*100,width:o,height:h}},I=function(){if(e)u.font="10px Arial",u.fillText("GameOver Press spacebar or",100,50),u.fillText("Mouse-click to restart",100,70);else{var t=g.length,o=0;for(o=0;t>o;o++)if(C(g[o]),void 0!==g[o].groupSprite)for(var h=g[o].groupSprite.length-1;h>=0;h--)L(g[o],g[o].groupSprite[h]);u.font="10px Arial",u.fillText("Score :"+i+" : Hi : "+r,10,50)}},M=function(){E((Date.now()-m)/1e3),I(),m=Date.now(),s&&S()},A=function(){g.push(p),g.push(x),g.push(y),T(),i>r&&(r=i),i=0,f=2,d=setInterval(M,10)},O=function(t,e){return e.splice(e.indexOf(t),1)};window.addEventListener("keydown",function(t){e&&32===t.keyCode?(e=!1,A()):v[t.keyCode]=!0}),window.addEventListener("mousedown",function(){e?(e=!1,A()):s=!0}),window.addEventListener("mouseup",function(){n=1,c=!1,s=!1}),window.addEventListener("keyup",function(t){n=1,c=!1,delete v[t.keyCode]}),A()}();
//# sourceMappingURL=./myGame-min.js.map